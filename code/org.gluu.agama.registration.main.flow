// User Registration Techniques
Flow org.gluu.agama.registration.main
     Basepath ""
     Timeout 360 seconds
// Create  variable for UI feedback
uiFeedback = {}
// Iterate x times max
Repeat 6 times max
     // Retrieve user profile  from UI
     userInput = RRF "profile.ftlh" uiFeedback
     // create an instance of Registration service
     userRegistrationService = Call org.gluu.agama.user.UserRegistration#getInstance 
     // Assign userName, email and password  to a variable
     email = userInput.mail
     userName = userInput.uid
     userPassword = userInput.userPassword
     // Check user name policy
     isUsernamePolicyMatch = Call userRegistrationService usernamePolicyMatch userName
     // if username policy match
     When isUsernamePolicyMatch is true
     Otherwise
          // Name should contain only alphabets
          uiFeedback.errorMessage = "Name should contain only alphabets"
// Maximum attempt reached
Log "@info Maximum attempt reached"
// User Registration flow failed
it_fsnxd = {success:false, error: "User registration flow reached max attempts try later"}
Finish it_fsnxd